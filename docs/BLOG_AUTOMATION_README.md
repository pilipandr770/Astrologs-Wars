# Система автоматизації блогу

Ця система дозволяє автоматично генерувати контент для блогу з використанням штучного інтелекту, перекладати його на різні мови, створювати зображення та публікувати в Telegram.

## Налаштування

Для правильної роботи системи необхідно додати наступні змінні середовища в файл `.env`:

```
# Blog Automation Configuration
OPENAI_CONTENT_ASSISTANT_ID=asst_your_content_assistant_id
OPENAI_TRANSLATION_ASSISTANT_ID=asst_your_translation_assistant_id
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_CHANNEL_NAME=@your_telegram_channel
```

## Основні можливості

1. **Генерація контенту**: Автоматична генерація статей блогу за заданими темами
2. **Переклад**: Автоматичний переклад контенту на англійську, німецьку та російську мови
3. **Генерація зображень**: Створення зображень для статей за допомогою DALL-E
4. **Публікація в Telegram**: Автоматична публікація готових статей у Telegram-канал
5. **Планувальник**: Налаштування розкладу для автоматичних публікацій

## Інтерфейс адміністратора

Доступ до системи автоматизації блогу здійснюється через адміністративну панель за посиланням: `/admin/blog-automation/`

### Керування темами

Для роботи системи необхідно додати теми для генерації контенту. Це можна зробити одним із способів:

1. **Додавання окремих тем**: Через сторінку "Теми для генерації"
2. **Масове завантаження**: Імпорт тем з CSV-файлу

### Налаштування автопостингу

На сторінці налаштувань можна встановити:

- Активація/деактивація автопостингу
- Дні тижня та час для публікацій
- Переклад контенту та цільові мови
- Генерація зображень та стиль зображень
- Публікація в Telegram

## Обслуговування

Усі операції системи автоматизації записуються в логи, які доступні через адміністративну панель. 
При виникненні помилок перевірте:

1. Наявність і правильність ключів API
2. Наявність доступу до інтернету
3. Наявність прав запису в директорію `/app/static/uploads/blog`

## Обмеження

Система використовує фіксований набір із 12 блоків блогу. При генерації нового контенту найстаріший блок замінюється новим.

## Відомі проблеми та їх вирішення

### AttributeError: 'str' object has no attribute 'strftime'

Ця помилка може виникати на сторінці налаштувань автопостингу через невідповідність типів даних між формою та моделлю. В базі даних поле `posting_time` зберігається як рядок формату "ГГ:ХХ", але форма використовує об'єкт типу `TimeField`.

Вирішено:
- Додано перевірку типу даних перед викликом `strftime()`
- Реалізовано конвертацію між рядковим форматом та об'єктом `time` у формі

### Відсутні зображення (помилки 404)

Якщо зображення для блогу не відображаються, переконайтесь, що:
1. Зображення знаходяться у правильній директорії (`/app/static/uploads/blog/`)
2. Шляхи до зображень у базі даних відповідають фактичним файлам
3. При необхідності запустіть скрипт `fix_blog_images.py` для виправлення шляхів

## Безпека

Не зберігайте ключі API та токени у відкритому вигляді в коді. Завжди використовуйте змінні середовища.
